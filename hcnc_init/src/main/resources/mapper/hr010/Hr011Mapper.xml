<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hcncinit.Hr011Mapper">
    <!-- 소속 및 계약정보 -->
    <select id="select_tab1" resultType="hashmap" parameterType="string">
        SELECT org_nm
            , biz_typ
            , DATE_FORMAT(st_dt, '%Y-%m-%d') AS st_dt
            , DATE_FORMAT(ed_dt, '%Y-%m-%d') AS ed_dt
            , amt
            , remark
        FROM tb_ctrt_info
        WHERE del_yn='N'
        AND use_yn='Y'
        AND dev_id = #{devId}
    </select>

    <insert id="upsert_tab1" parameterType="map">
        INSERT INTO tb_ctrt_info (
            org_nm,
            biz_typ,
            st_dt,
            ed_dt,
            amt,
            remark,
            dev_id,
            upd_ts,
            upd_by
        ) VALUES (
            #{orgNm},
            #{bizTyp},
            #{stDt},
            #{edDt},
            #{amt},
            #{remark},
            #{devId},
            now(),
            #{devId}
        ) ON DUPLICATE KEY UPDATE
            org_nm = #{orgNm},
            biz_typ = #{bizTyp},
            st_dt = #{stDt},
            ed_dt = #{edDt},
            amt = #{amt},
            remark = #{remark},
            upd_ts = now(),
            upd_by = #{devId}
    </insert>
</mapper>
